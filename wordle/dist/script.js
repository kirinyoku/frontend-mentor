"use strict";var currentGuessCount=1,tileNumber=0,currentGuess=document.querySelector("#guess".concat(currentGuessCount)),guessTiles=document.querySelectorAll("#guess".concat(currentGuessCount," .guess__tile")),keyboardKeys=document.querySelectorAll(".keyboard__key"),result=document.querySelector(".result__info"),helpButton=document.querySelector("#help-button"),refreshButton=document.querySelector("#refresh-button"),helpMenu=document.querySelector("#help"),helpMenuClose=document.querySelector(".modal__close > img"),controller=new AbortController,signal=controller.signal,letterPattern=/^[A-Za-z][A-Za-z0-9]*$/,words=[],guessWord=function(e){var t=Math.floor(Math.random()*(e.length-1))+1;localStorage.setItem("solution",e[t])},getSolution=function(){fetch("../words.json").then((function(e){return e.json()})).then((function(e){guessWord(e)}))},getWords=function(){fetch("../words.json").then((function(e){return e.json()})).then((function(e){words=e}))},addAnimDelay=function(){for(var e=1;e<=6;e++)for(var t=0,s=document.querySelectorAll("#guess".concat(e," > div")),n=0;n<s.length;n++)s[n].style.animationDelay="".concat(t,"ms"),t+=150},addAnimation=function(e,t){e.dataset.animation=t},getKey=function(e){return document.querySelector(".keyboard__key[data-key=".concat(e,"]"))},typeLetter=function(e){if(tileNumber<=4){var t=guessTiles[tileNumber];addAnimation(t,"pop"),t.textContent=e,currentGuess.dataset.letters+=e,tileNumber+=1}},eraseLetter=function(){if(tileNumber>0){var e=guessTiles[tileNumber-=1];e.textContent="",e.dataset.animation="idle",currentGuess.dataset.letters=currentGuess.dataset.letters.slice(0,-1)}},checkLetters=function(){for(var e=0;e<guessTiles.length;e++){var t=guessTiles[e].textContent;t===localStorage.getItem("solution")[e]?(guessTiles[e].dataset.state="correct",getKey(t).dataset.state="correct"):localStorage.getItem("solution").includes(t)?(guessTiles[e].dataset.state="present",getKey(t).dataset.state="present"):(guessTiles[e].dataset.state="absent",getKey(t).dataset.state="absent"),addAnimation(guessTiles[e].parentElement,"flip"),addAnimation(guessTiles[e],"idle")}},checkGuess=function(){currentGuess.dataset.guess===localStorage.getItem("solution")?(controller.abort(),localStorage.clear(),result.textContent="You guessed the word! ðŸ¥³"):6===currentGuessCount?(controller.abort(),result.textContent=localStorage.getItem("solution"),localStorage.clear()):(tileNumber=0,currentGuessCount+=1,currentGuess=document.querySelector("#guess".concat(currentGuessCount)),guessTiles=document.querySelectorAll("#guess".concat(currentGuessCount," .guess__tile")),result.textContent="")},addGuessToData=function(){currentGuess.dataset.guess=currentGuess.dataset.letters},addGuessToStorage=function(){localStorage.setItem("guess",[localStorage.getItem("guess"),currentGuess.dataset.guess])},submitGuess=function(){words.includes(currentGuess.dataset.letters)?(checkLetters(),addGuessToData(),addGuessToStorage(),checkGuess()):(addAnimation(currentGuess,"shake"),result.textContent="isn't a word",setTimeout((function(){addAnimation(currentGuess,"idle"),result.textContent=""}),600))},openHelp=function(){helpMenu.style.display="flex"},closeHelp=function(){helpMenu.style.display="none"},refreshGame=function(){localStorage.clear(),location.reload()};window.addEventListener("load",(function(){var e;if(localStorage.getItem("solution")||getSolution(),getWords(),addAnimDelay(),(null===(e=localStorage.getItem("guess"))||void 0===e?void 0:e.length)>0)for(var t=1;t<=localStorage.getItem("guess").split(",").join("").length;t++)typeLetter(localStorage.getItem("guess").split(",").join("")[t-1]),0!==t&&t%5==0&&(checkLetters(),currentGuess.dataset.guess=currentGuess.dataset.letters,checkGuess());refreshButton.addEventListener("click",(function(){refreshGame()})),helpButton.addEventListener("click",(function(){openHelp()})),helpMenu.addEventListener("click",(function(e){console.log(e.target),e.target!==helpMenu&&e.target!==helpMenuClose||closeHelp()}))})),document.addEventListener("keydown",(function(e){1===e.key.length&&letterPattern.test(e.key)?typeLetter(e.key.toLocaleLowerCase()):"Backspace"===e.key?eraseLetter():"Enter"===e.key&&5===tileNumber&&currentGuessCount<=6&&submitGuess()}),{signal:signal});for(var i=0;i<keyboardKeys.length;i++)keyboardKeys[i].addEventListener("click",(function(e){var t=e.currentTarget.dataset.key;1===t.length&&letterPattern.test(t)?typeLetter(t):"Backspace"===t?eraseLetter():"Enter"===t&&5===tileNumber&&currentGuessCount<=6&&submitGuess()}));
//# sourceMappingURL=script.js.map